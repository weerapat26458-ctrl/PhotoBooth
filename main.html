<!DOCTYPE html>
<html lang="th">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>AI Event : AI Event : Owl Always Love You - Memory Wall</title>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
Â  Â  <style>
Â  Â  Â  Â  @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&family=Pacifico&display=swap');

Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --bg-pink: #fff0f3;
Â  Â  Â  Â  Â  Â  --paper-white: #ffffff;
Â  Â  Â  Â  Â  Â  --accent-pink: #ff4d6d;
Â  Â  Â  Â  Â  Â  --dark-pink: #f72585;
Â  Â  Â  Â  Â  Â  --soft-pink: #ffb3c1;
Â  Â  Â  Â  Â  Â  --glass: rgba(255, 255, 255, 0.6);
Â  Â  Â  Â  }

Â  Â  Â  Â  body, html {
Â  Â  Â  Â  Â  Â  margin: 0; padding: 0;
Â  Â  Â  Â  Â  Â  width: 100%; height: 100%;
Â  Â  Â  Â  Â  Â  background-color: var(--bg-pink);
Â  Â  Â  Â  Â  Â  background-image: radial-gradient(var(--soft-pink) 1px, transparent 1px);
Â  Â  Â  Â  Â  Â  background-size: 30px 30px; /* à¸¥à¸”à¸‚à¸™à¸²à¸”à¸ˆà¸¸à¸” background */
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  font-family: 'Kanit', sans-serif;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Header Section (Compact Scale) --- */
Â  Â  Â  Â  .main-header {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  padding: 20px 10px 15px; /* à¸¥à¸” Padding */
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  background: linear-gradient(to bottom, var(--bg-pink) 70%, transparent);
Â  Â  Â  Â  }

Â  Â  Â  Â  .main-header h1 {
Â  Â  Â  Â  Â  Â  font-family: 'Pacifico', cursive;
Â  Â  Â  Â  Â  Â  font-size: 3rem; /* à¸¥à¸”à¸‚à¸™à¸²à¸”à¸ˆà¸²à¸ 4.5rem */
Â  Â  Â  Â  Â  Â  color: var(--dark-pink);
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  text-shadow: 2px 2px 8px rgba(247, 37, 133, 0.2);
Â  Â  Â  Â  Â  Â  line-height: 1.1;
Â  Â  Â  Â  }

Â  Â  Â  Â  .main-header p {
Â  Â  Â  Â  Â  Â  font-size: 1.1rem; /* à¸¥à¸”à¸‚à¸™à¸²à¸”à¸ˆà¸²à¸ 1.5rem */
Â  Â  Â  Â  Â  Â  color: #666;
Â  Â  Â  Â  Â  Â  margin: 5px 0 0;
Â  Â  Â  Â  Â  Â  font-weight: 300;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- LOGO à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™ (Scaled Down) --- */
Â  Â  Â  Â  .brand-logo-fixed {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 15px;
Â  Â  Â  Â  Â  Â  right: 20px;
Â  Â  Â  Â  Â  Â  z-index: 1100;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .brand-logo-fixed img {
Â  Â  Â  Â  Â  Â  height: 60px; /* à¸¥à¸”à¸‚à¸™à¸²à¸”à¸ˆà¸²à¸ 90px */
Â  Â  Â  Â  Â  Â  width: auto;
Â  Â  Â  Â  Â  Â  opacity: 0.9;
Â  Â  Â  Â  Â  Â  filter: drop-shadow(0 3px 10px rgba(0,0,0,0.1));
Â  Â  Â  Â  }

Â  Â  Â  Â  #wall {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  z-index: 1;
Â  Â  Â  Â  Â  Â  perspective: 1200px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .floating-heart-bg {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  color: var(--soft-pink);
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  Â  Â  top: -10vh;
Â  Â  Â  Â  Â  Â  animation: floatDown var(--d) linear infinite;
Â  Â  Â  Â  Â  Â  z-index: 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes floatDown {
Â  Â  Â  Â  Â  Â  0% { transform: translateY(0) scale(0.4) rotate(0deg); opacity: 0; }
Â  Â  Â  Â  Â  Â  10% { opacity: 0.5; }
Â  Â  Â  Â  Â  Â  90% { opacity: 0.5; }
Â  Â  Â  Â  Â  Â  100% { transform: translateY(110vh) scale(1) rotate(360deg); opacity: 0; }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Footer Section (Compact Scale) --- */
Â  Â  Â  Â  .footer-bar {
Â  Â  Â  Â  Â  Â  height: 120px; /* à¸¥à¸”à¸ˆà¸²à¸ 180px */
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.4);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  Â  Â  -webkit-backdrop-filter: blur(10px);
Â  Â  Â  Â  Â  Â  display: flex; justify-content: center; align-items: center;
Â  Â  Â  Â  Â  Â  border-top: 1px solid rgba(255, 255, 255, 0.5);
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-start {
Â  Â  Â  Â  Â  Â  padding: 15px 50px; /* à¸¥à¸”à¸ˆà¸²à¸ 25/90 */
Â  Â  Â  Â  Â  Â  font-size: 22px; /* à¸¥à¸”à¸ˆà¸²à¸ 36px */
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  background: linear-gradient(45deg, var(--dark-pink), var(--accent-pink));
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 50px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 25px rgba(247, 37, 133, 0.2);
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  Â  Â  font-family: 'Kanit', sans-serif;
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-start:hover { transform: scale(1.05); }

Â  Â  Â  Â  /* --- Photo Items (Downscaled) --- */
Â  Â  Â  Â  .photo-item {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  background: var(--paper-white);
Â  Â  Â  Â  Â  Â  padding: 8px 8px 25px 8px; /* à¸¥à¸” padding */
Â  Â  Â  Â  Â  Â  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  transition: all 1s ease-out;
Â  Â  Â  Â  Â  Â  transform-origin: top center;
Â  Â  Â  Â  Â  Â  animation: windSway var(--sway-dur) ease-in-out infinite alternate var(--sway-delay);
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  z-index: 5;
Â  Â  Â  Â  Â  Â  border-radius: 3px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .photo-item.visible { opacity: 1; }
Â  Â  Â  Â  .p-grid4 { width: 140px; height: 200px; } /* à¸¥à¸”à¸‚à¸™à¸²à¸”à¸ˆà¸²à¸ 180x260 */

Â  Â  Â  Â  @keyframes windSway {
Â  Â  Â  Â  Â  Â  0%Â  Â { transform: rotate(calc(var(--r) - 2deg)); }
Â  Â  Â  Â  Â  Â  100% { transform: rotate(calc(var(--r) + 2deg)); }
Â  Â  Â  Â  }

Â  Â  Â  Â  .photo-item::before {
Â  Â  Â  Â  Â  Â  content: "";
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: -12px; left: 50%;
Â  Â  Â  Â  Â  Â  transform: translateX(-50%) rotate(var(--tape-r));
Â  Â  Â  Â  Â  Â  width: 40px; height: 18px; /* à¸¥à¸”à¸‚à¸™à¸²à¸”à¹€à¸—à¸› */
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.4);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(2px);
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(255,255,255,0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  .photo-item img {Â 
Â  Â  Â  Â  Â  Â  width: 100%; height: 100%;Â 
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  display: block;Â 
Â  Â  Â  Â  Â  Â  background: #fafafa;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .loading-text {
Â  Â  Â  Â  Â  Â  position: absolute; width: 100%; top: 40%; text-align: center;
Â  Â  Â  Â  Â  Â  color: var(--dark-pink); font-size: 1.4rem; font-family: 'Pacifico';
Â  Â  Â  Â  Â  Â  opacity: 0.5;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

<div class="brand-logo-fixed">
Â  Â  <img src="assets/Logo.png" alt="Logo">
</div>

<div class="main-header">
Â  Â  <h1>AI Event : Owl Always Love You</h1>
Â  Â  <p>à¸£à¹ˆà¸§à¸¡à¹€à¸à¹‡à¸šà¸„à¸§à¸²à¸¡à¸—à¸£à¸‡à¸ˆà¸³à¸”à¸µà¸”à¸µà¸”à¹‰à¸§à¸¢à¸à¸±à¸™</p>
</div>

<div id="wall">
Â  Â  <div class="loading-text" id="loading">Gathering memories...</div>
</div>

<div class="footer-bar">
Â  Â  <a href="layout.html" class="btn-start">
Â  Â  Â  Â  <span>ğŸ“¸</span> à¹€à¸£à¸´à¹ˆà¸¡à¸–à¹ˆà¸²à¸¢à¸£à¸¹à¸›
Â  Â  </a>
</div>

<script>
Â  Â  const supabaseUrl = 'https://mhdlmwscndyyokvcqqla.supabase.co';
Â  Â  const supabaseKey = 'sb_publishable_fr1iDj6c6_lWS7bHQF3d4w_D6VoatP4';
Â  Â  const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);

Â  Â  const wall = document.getElementById('wall');
Â  Â  const cols = 6;
Â  Â  const rows = 3;
Â  Â  let gridSlots = [];
Â  Â  let currentPhotoIndex = 0;

Â  Â  function initGrid() {
Â  Â  Â  Â  gridSlots = [];
Â  Â  Â  Â  for (let r = 0; r < rows; r++) {
Â  Â  Â  Â  Â  Â  for (let c = 0; c < cols; c++) {
Â  Â  Â  Â  Â  Â  Â  Â  gridSlots.push({ r, c });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  gridSlots.sort(() => Math.random() - 0.5);
Â  Â  }

Â  Â  function placePhotoOnWall(photoUrl, isNew = false) {
Â  Â  Â  Â  if (!photoUrl) return;Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (currentPhotoIndex >= gridSlots.length) currentPhotoIndex = 0;Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  const slot = gridSlots[currentPhotoIndex];
Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â Â 
Â  Â  Â  Â  item.className = `photo-item p-grid4`;

Â  Â  Â  Â  const cellW = window.innerWidth / cols;
Â  Â  Â  Â  const cellH = (window.innerHeight - 200) / rows; /* à¸›à¸£à¸±à¸š offset à¸•à¸²à¸¡ Footer à¸—à¸µà¹ˆà¹€à¸¥à¹‡à¸à¸¥à¸‡ */
Â  Â  Â  Â  const offsetX = (Math.random() - 0.5) * (cellW * 0.5);
Â  Â  Â  Â  const offsetY = (Math.random() - 0.5) * (cellH * 0.5);
Â  Â  Â  Â  const rotate = (Math.random() - 0.5) * 15;
Â  Â  Â  Â  const tapeRotate = (Math.random() - 0.5) * 30;

Â  Â  Â  Â  /* à¸›à¸£à¸±à¸š Offset à¸à¸¶à¹ˆà¸‡à¸à¸¥à¸²à¸‡à¹ƒà¸«à¹‰à¸•à¸£à¸‡à¸à¸±à¸šà¸‚à¸™à¸²à¸”à¹ƒà¸«à¸¡à¹ˆ (140/2 = 70, 200/2 = 100) */
Â  Â  Â  Â  item.style.left = `${(slot.c * cellW) + (cellW/2) + offsetX - 70}px`;
Â  Â  Â  Â  item.style.top = `${(slot.r * cellH) + (cellH/2) + offsetY - 100}px`;
Â  Â  Â  Â  item.style.setProperty('--r', `${rotate}deg`);
Â  Â  Â  Â  item.style.setProperty('--tape-r', `${tapeRotate}deg`);
Â  Â  Â  Â  item.style.setProperty('--sway-dur', (4 + Math.random() * 4) + 's');
Â  Â  Â  Â  item.style.setProperty('--sway-delay', -(Math.random() * 5) + 's');
Â  Â  Â  Â Â 
Â  Â  Â  Â  item.innerHTML = `<img src="${photoUrl}" alt="Memory">`;
Â  Â  Â  Â  wall.appendChild(item);
Â  Â  Â  Â Â 
Â  Â  Â  Â  setTimeout(() => { item.classList.add('visible'); }, isNew ? 100 : currentPhotoIndex * 150);
Â  Â  Â  Â  currentPhotoIndex++;
Â  Â  }

Â  Â  async function fetchPhotos() {
Â  Â  Â  Â  initGrid();
Â  Â  Â  Â  const { data: photos, error } = await supabaseClient
Â  Â  Â  Â  Â  Â  .from('photos')
Â  Â  Â  Â  Â  Â  .select('preview_url')
Â  Â  Â  Â  Â  Â  .eq('is_active', true)
Â  Â  Â  Â  Â  Â  .order('created_at', { ascending: false })
Â  Â  Â  Â  Â  Â  .limit(18);

Â  Â  Â  Â  document.getElementById('loading').style.display = 'none';

Â  Â  Â  Â  if (photos) {
Â  Â  Â  Â  Â  Â  photos.forEach((photo) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (photo.preview_url) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placePhotoOnWall(photo.preview_url);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function subscribeToNewPhotos() {
Â  Â  Â  Â  supabaseClient
Â  Â  Â  Â  Â  Â  .channel('public:photos')
Â  Â  Â  Â  Â  Â  .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'photos' }, payload => {
Â  Â  Â  Â  Â  Â  Â  Â  if (payload.new.preview_url) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placePhotoOnWall(payload.new.preview_url, true);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  .subscribe();
Â  Â  }

Â  Â  window.onload = () => {
Â  Â  Â  Â  fetchPhotos();
Â  Â  Â  Â  subscribeToNewPhotos();
Â  Â  Â  Â Â 
Â  Â  Â  Â  setInterval(() => {
Â  Â  Â  Â  Â  Â  const heart = document.createElement('div');
Â  Â  Â  Â  Â  Â  heart.className = 'floating-heart-bg';
Â  Â  Â  Â  Â  Â  heart.innerHTML = ['â¤ï¸', 'ğŸ’–', 'âœ¨'][Math.floor(Math.random() * 3)];
Â  Â  Â  Â  Â  Â  heart.style.left = Math.random() * 100 + 'vw';
Â  Â  Â  Â  Â  Â  heart.style.setProperty('--d', (10 + Math.random() * 10) + 's');
Â  Â  Â  Â  Â  Â  wall.appendChild(heart);
Â  Â  Â  Â  Â  Â  setTimeout(() => heart.remove(), 20000);
Â  Â  Â  Â  }, 1200);
Â  Â  };
</script>

</body>
</html>
