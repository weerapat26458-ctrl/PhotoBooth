<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Your Photo - Happy Owl ü¶â</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&family=Pacifico&display=swap');
        body { 
            font-family: 'Kanit', sans-serif; 
            background: #fff0f3; 
            margin: 0; padding: 20px; 
            display: flex; flex-direction: column; align-items: center; 
            min-height: 100vh;
        }
        .container { max-width: 450px; width: 100%; text-align: center; }
        h1 { font-family: 'Pacifico', cursive; color: #f72585; margin: 10px 0; }
        
        .photo-card {
            background: white; padding: 15px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(247,37,133,0.1); margin-bottom: 25px;
        }
        img { width: 100%; border-radius: 12px; display: block; }
        
        p { color: #666; font-size: 0.9rem; margin-bottom: 20px; line-height: 1.4; }
        
        .btn-group { display: flex; flex-direction: column; gap: 12px; }
        .btn {
            padding: 16px; border-radius: 50px; border: none;
            font-size: 1rem; font-weight: 600; cursor: pointer;
            text-decoration: none; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-share { background: #f72585; color: white; box-shadow: 0 4px 15px rgba(247,37,133,0.3); }
        .btn-save { background: white; color: #f72585; border: 2px solid #f72585; }
        
        .footer { margin-top: 30px; font-size: 0.8rem; color: #aaa; }
    </style>
</head>
<body>

<div class="container">
    <h1>Happy Owl ü¶â</h1>
    <div class="photo-card">
        <img id="photo-display" src="" alt="Your Photo">
    </div>

    <p>‚ú® ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ä‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û<br>(‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á)</p>
    
    <div class="btn-group">
        <button class="btn btn-share" id="shareBtn">üöÄ ‡πÅ‡∏ä‡∏£‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (Share)</button>
        <a id="downloadLink" href="" download="happy-owl-photo.png" class="btn btn-save">üì• ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</a>
    </div>

    <div class="footer">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ Happy Owl Photobooth</div>
</div>

<script>
    // 1. ‡∏î‡∏∂‡∏á URL ‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å Query String
    const urlParams = new URLSearchParams(window.location.search);
    const imageUrl = urlParams.get('image');
    const photoDisplay = document.getElementById('photo-display');
    const downloadLink = document.getElementById('downloadLink');

    if (imageUrl) {
        photoDisplay.src = imageUrl;
        downloadLink.href = imageUrl;
    } else {
        alert("‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì");
    }

    // 2. ‡∏£‡∏∞‡∏ö‡∏ö Web Share API
    document.getElementById('shareBtn').addEventListener('click', async () => {
        if (navigator.share) {
            try {
                await navigator.share({
                    title: 'Happy Owl Photobooth',
                    text: '‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡∏™‡∏∏‡∏î‡∏Ñ‡∏¥‡∏ß‡∏ó‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô! ü¶â‚ú®',
                    url: imageUrl
                });
            } catch (err) {
                console.log('Error sharing:', err);
            }
        } else {
            alert("‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ó‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞");
        }
    });
</script>

</body>
</html>
